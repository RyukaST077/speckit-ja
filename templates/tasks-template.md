---
description: "フィーチャー実装のためのタスク一覧テンプレート"
---

# タスク: [FEATURE NAME]

**入力**: `/specs/[###-feature-name]/` 配下の設計ドキュメント  
**前提条件**: plan.md (必須)、spec.md (ユーザーストーリーのため必須)、research.md、data-model.md、contracts/

**テスト**: 以下の例にはテストタスクが含まれています。テストは任意であり、フィーチャー仕様で明示的に要求された場合のみ含めてください。

**構成**: 各タスクはユーザーストーリーごとに整理し、ストーリー単位での独立実装とテストを可能にします。

## 記法: `[ID] [P?] [Story] 説明`
- **[P]**: 並行実行が可能 (異なるファイルで依存関係なし)
- **[Story]**: 該当するユーザーストーリー (例: US1, US2, US3)
- 説明内に正確なファイルパスを記載してください

## パス規約
- **単一プロジェクト**: リポジトリ直下の `src/`, `tests/`
- **Web アプリ**: `backend/src/`, `frontend/src/`
- **モバイル**: `api/src/`, `ios/src/` または `android/src/`
- 以下の例は単一プロジェクト構成を前提としています。plan.md で定義された構成に合わせて調整してください。

<!-- 
  ============================================================================
  重要: 以下のタスクは説明のためのサンプルです。
  
  /speckit.tasks コマンドは必ず次の情報に基づき実際のタスクへ置き換えます:
  - spec.md に記載されたユーザーストーリー (優先度 P1, P2, P3...)
  - plan.md に記載されたフィーチャー要件
  - data-model.md に含まれるエンティティ
  - contracts/ に定義されたエンドポイント
  
  タスクはユーザーストーリー単位で整理し、各ストーリーが以下を満たすようにしてください:
  - 独立して実装できる
  - 独立してテストできる
  - MVP 増分として提供できる
  
  生成された tasks.md にサンプルタスクを残してはいけません。
  ============================================================================
-->

## フェーズ 1: セットアップ (共有インフラ)

**目的**: プロジェクト初期化と基本構成の準備

- [ ] T001 実装計画に従ってプロジェクト構造を作成
- [ ] T002 [言語] プロジェクトを [フレームワーク] 依存関係付きで初期化
- [ ] T003 [P] リンターおよび整形ツールを設定

---

## フェーズ 2: 基盤 (ブロッキング前提条件)

**目的**: どのユーザーストーリーを実装する前にも完了しておくべき基盤インフラ

**⚠️ 重大**: このフェーズが完了するまでユーザーストーリーの作業を開始しないこと

基盤タスクの例 (プロジェクトに合わせて調整):

- [ ] T004 データベーススキーマとマイグレーション基盤を構築
- [ ] T005 [P] 認証/認可フレームワークを実装
- [ ] T006 [P] API ルーティングとミドルウェア構成を設定
- [ ] T007 すべてのストーリーが依存する基本モデル/エンティティを作成
- [ ] T008 エラーハンドリングとロギング基盤を構築
- [ ] T009 環境設定管理を整備

**チェックポイント**: 基盤が整い、ユーザーストーリー実装を並行で開始できる状態

---

## フェーズ 3: ユーザーストーリー 1 - [タイトル] (優先度: P1) 🎯 MVP

**ゴール**: [このストーリーで届ける価値の簡潔な説明]

**独立テスト**: [このストーリー単体での確認方法]

### ユーザーストーリー 1 のテスト (任意 - テストが要求された場合のみ) ⚠️

**注意: テストは最初に作成し、実装前に FAIL することを確認してください**

- [ ] T010 [P] [US1] tests/contract/test_[name].py で [エンドポイント] の契約テスト
- [ ] T011 [P] [US1] tests/integration/test_[name].py で [ユーザージャーニー] の統合テスト

### ユーザーストーリー 1 の実装

- [ ] T012 [P] [US1] src/models/[entity1].py に [Entity1] モデルを作成
- [ ] T013 [P] [US1] src/models/[entity2].py に [Entity2] モデルを作成
- [ ] T014 [US1] src/services/[service].py に [サービス] を実装 (T012, T013 に依存)
- [ ] T015 [US1] src/[location]/[file].py に [エンドポイント/機能] を実装
- [ ] T016 [US1] バリデーションとエラーハンドリングを追加
- [ ] T017 [US1] ユーザーストーリー 1 の処理にロギングを追加

**チェックポイント**: この時点でユーザーストーリー 1 が独立して機能し、テストできる状態にする

---

## フェーズ 4: ユーザーストーリー 2 - [タイトル] (優先度: P2)

**ゴール**: [このストーリーで届ける価値の簡潔な説明]

**独立テスト**: [このストーリー単体での確認方法]

### ユーザーストーリー 2 のテスト (任意 - テストが要求された場合のみ) ⚠️

- [ ] T018 [P] [US2] tests/contract/test_[name].py で [エンドポイント] の契約テスト
- [ ] T019 [P] [US2] tests/integration/test_[name].py で [ユーザージャーニー] の統合テスト

### ユーザーストーリー 2 の実装

- [ ] T020 [P] [US2] src/models/[entity].py に [エンティティ] モデルを作成
- [ ] T021 [US2] src/services/[service].py に [サービス] を実装
- [ ] T022 [US2] src/[location]/[file].py に [エンドポイント/機能] を実装
- [ ] T023 [US2] 必要に応じてユーザーストーリー 1 のコンポーネントと統合

**チェックポイント**: ユーザーストーリー 1 と 2 がそれぞれ独立して動作する状態

---

## フェーズ 5: ユーザーストーリー 3 - [タイトル] (優先度: P3)

**ゴール**: [このストーリーで届ける価値の簡潔な説明]

**独立テスト**: [このストーリー単体での確認方法]

### ユーザーストーリー 3 のテスト (任意 - テストが要求された場合のみ) ⚠️

- [ ] T024 [P] [US3] tests/contract/test_[name].py で [エンドポイント] の契約テスト
- [ ] T025 [P] [US3] tests/integration/test_[name].py で [ユーザージャーニー] の統合テスト

### ユーザーストーリー 3 の実装

- [ ] T026 [P] [US3] src/models/[entity].py に [エンティティ] モデルを作成
- [ ] T027 [US3] src/services/[service].py に [サービス] を実装
- [ ] T028 [US3] src/[location]/[file].py に [エンドポイント/機能] を実装

**チェックポイント**: すべてのユーザーストーリーが独立して機能する状態

---

[同じパターンで必要なユーザーストーリーフェーズを追加]

---

## フェーズ N: 仕上げ & 横断的な対応

**目的**: 複数のユーザーストーリーに影響する改善

- [ ] TXXX [P] docs/ 内のドキュメントを更新
- [ ] TXXX コードのクリーンアップとリファクタリング
- [ ] TXXX 全ストーリーに跨るパフォーマンス最適化
- [ ] TXXX [P] 追加の単体テスト (要求された場合) を tests/unit/ に追加
- [ ] TXXX セキュリティ強化
- [ ] TXXX quickstart.md の手順を検証

---

## 依存関係と実行順

### フェーズ間の依存関係

- **セットアップ (フェーズ 1)**: 依存なし。直ちに開始可能
- **基盤 (フェーズ 2)**: セットアップ完了が前提。すべてのユーザーストーリーをブロック
- **ユーザーストーリー (フェーズ 3 以降)**: すべて基盤フェーズ完了に依存
  - 人員が揃っていれば並行で進められる
  - もしくは優先度順 (P1 → P2 → P3) に直列で実施
- **仕上げ (最終フェーズ)**: 対象とするユーザーストーリーが完了していることが前提

### ユーザーストーリー間の依存関係

- **ユーザーストーリー 1 (P1)**: 基盤完了後に開始可。他ストーリーへの依存なし
- **ユーザーストーリー 2 (P2)**: 基盤完了後に開始可。US1 と統合する場合も独立テスト可能であること
- **ユーザーストーリー 3 (P3)**: 基盤完了後に開始可。US1/US2 と統合する場合も独立テスト可能であること

### 各ユーザーストーリー内

- テスト (含める場合) は実装前に作成し FAIL を確認すること
- モデルをサービスより先に
- サービスをエンドポイントより先に
- 中核実装を統合作業より先に
- ストーリー完了後に次の優先度へ進む

### 並行実行の機会

- [P] が付与されたセットアップタスクは並行実行可能
- 基盤フェーズ内で [P] が付与されたタスクも並行実行可能
- 基盤フェーズが完了したら、ユーザーストーリーはチームの余力に応じて並行で着手可能
- 各ユーザーストーリーのテストで [P] が付与されたものは並行実行可能
- 同一ストーリー内でも [P] が付いたモデル作成タスクは並行実行可能
- 複数のユーザーストーリーは担当者を分けて並行に進められる

---

## 並行実行例: ユーザーストーリー 1

```bash
# ユーザーストーリー 1 のテストをまとめて実行する (テストが要求された場合):
Task: "tests/contract/test_[name].py で [エンドポイント] の契約テスト"
Task: "tests/integration/test_[name].py で [ユーザージャーニー] の統合テスト"

# ユーザーストーリー 1 のモデルをまとめて作成する:
Task: "src/models/[entity1].py に [Entity1] モデルを作成"
Task: "src/models/[entity2].py に [Entity2] モデルを作成"
```

---

## 実装戦略

### MVP 優先 (ユーザーストーリー 1 のみ)

1. フェーズ 1: セットアップを完了
2. フェーズ 2: 基盤を完了 (重大 - すべてのストーリーをブロック)
3. フェーズ 3: ユーザーストーリー 1 を完了
4. **停止して検証**: ユーザーストーリー 1 を単体でテスト
5. 準備が整えばデプロイ/デモ

### インクリメンタルな提供

1. セットアップ + 基盤を完了 → 基盤が整う
2. ユーザーストーリー 1 を追加 → 独立テスト → デプロイ/デモ (MVP!)
3. ユーザーストーリー 2 を追加 → 独立テスト → デプロイ/デモ
4. ユーザーストーリー 3 を追加 → 独立テスト → デプロイ/デモ
5. 各ストーリーが前段の価値を損なわずに機能を追加

### チームでの並行戦略

複数開発者で進める場合:

1. チームでセットアップ + 基盤を完了
2. 基盤完了後:
   - 開発者 A: ユーザーストーリー 1
   - 開発者 B: ユーザーストーリー 2
   - 開発者 C: ユーザーストーリー 3
3. 各ストーリーは独立して完了し統合

---

## メモ

- [P] タスク = 異なるファイルで依存なし
- [Story] ラベルでタスクを該当ユーザーストーリーに紐付ける
- 各ユーザーストーリーは独立して完了し、テスト可能であるべき
- 実装前にテストが失敗することを確認
- 各タスクまたは論理的なまとまりごとにコミット
- 任意のチェックポイントでストーリーの状態を検証
- 曖昧なタスク、同一ファイルの競合、独立性を損なうストーリー間依存は避ける
